

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Usage &mdash; behaviour_box 0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="behaviour_box 0 documentation" href="index.html"/>
        <link rel="next" title="Software Descriptions" href="details.html"/>
        <link rel="prev" title="Hardware" href="hardware.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> behaviour_box
          

          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware.html">Hardware</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#interactive-options">Interactive Options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="details.html">Software Descriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="code.html">Code Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">behaviour_box</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Usage</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<p>A set of trials are run through the <code class="docutils literal"><span class="pre">SerialController.py</span></code> script. At
the windows command prompt cd to the root directory of the
behaviour_box repository.</p>
<p>When the program runs the first thing it does is make a new folder to
save the logs in. The base of the new directory can be specified by
<code class="docutils literal"><span class="pre">--datapath</span></code> and the new folder is always the current date is in the
format YYMMDD.</p>
<p>In addition it also creates two files, a raw log file which stores all
time stamped communications sent and received by the program, and a csv
file which contains the same data in tabulated form. The name pattern
for the csv is <code class="docutils literal"><span class="pre">{ID}_{date}_000.csv</span></code> where ID is given with the
<code class="docutils literal"><span class="pre">-ID</span></code> argument and date is in the format YYMMDD.</p>
<p><em>It is important to note that the data files will be appended to each
time the program is run over the course of the day, unless a new ID is
specified.</em></p>
<p>Next the program checks the serial port specified by the <code class="docutils literal"><span class="pre">--port</span></code>
argument. On Windows the serial ports are specified by <code class="docutils literal"><span class="pre">COMx</span></code> where
<code class="docutils literal"><span class="pre">x</span></code> is some integer. In my case my Arduino always occupies <code class="docutils literal"><span class="pre">COM5</span></code>,
so I have set that as the default port to check. <em>More about adjusting
defaults in a bit</em>. If no communications are found the program will
exit.</p>
<p>When the connection has been established the program first transmits a
number of configuration variables to the arduino, such as the lick
threshold, and timing information. These can be updated online later,
but it saves time to avoid sending them on each trial if they are
unchanged.</p>
<p>The program then begins to loop through the <code class="docutils literal"><span class="pre">trials</span></code> variable, which
is an iterable list of the stimulus durations. On each loop the program
tells the Arduino what duration to play, and weather or not to reward a
lick.</p>
<p>At this point the program sends the <code class="docutils literal"><span class="pre">START</span></code> message to the Arduino and
the trial begins. As the trial runs the program monitors the Arduino
status messages as they come in.</p>
<p>At the end of the trial the program collects all the status messages and
formats them into a Pandas DataFrame, which is then saved into
<code class="docutils literal"><span class="pre">{ID}_{date}_000.csv</span></code></p>
<div class="section" id="interactive-options">
<h2>Interactive Options<a class="headerlink" href="#interactive-options" title="Permalink to this headline">¶</a></h2>
<p>The Python wrapper was written to allow for limited interaction with the
Arduino while a trial was being run without the need to touch the source code
and recompile. With animal experimentation in mind it was decided that it
would be best to avoid editing the control code during a run. The Arduino
exposes a number of relevant variables to the Serial Communications port,
which the Python wrapper reads and writes to.</p>
<p>The interactive options currently provided allow the following variables to be
altered online:</p>
<ul class="simple">
<li>Punish</li>
<li>lick threshold</li>
<li>show threshold</li>
<li>lick count</li>
<li>show lick count</li>
<li>toggle mode</li>
<li>adjust no lick Period</li>
<li>show no Lick Period</li>
<li>adjust trial duration</li>
<li>toggle time out</li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="details.html" class="btn btn-neutral float-right" title="Software Descriptions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hardware.html" class="btn btn-neutral" title="Hardware" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Andrew Micallef.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>